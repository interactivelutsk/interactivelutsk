<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
   <link rel="shortcut icon" type="image/x-icon" href="https://interactivelutsk.github.io/interactivelutsk/img/favicon.png">
   <title>Lutsk Castle AR</title>
   <link rel="stylesheet" href="https://interactivelutsk.github.io/interactivelutsk/assets/css/bar.css">
   <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
     integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
     crossorigin=""/>
   <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
     integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" 
     crossorigin=""></script>
</head>
<body>
<div class="container"> 
      <h1>  Ваша геолокація: </h1>
   <div id="map"></div>
   </div>
<model-viewer id="madonna" ar ar-modes="webxr" camera-controls touch-action="pan-y" src="https://interactivelutsk.github.io/interactivelutsk/assets/3D/lutsk.glb" orientation="-3deg 3deg 0" width="100%" height="100%" tone-mapping="aces" shadow-intensity="1" alt="A 3D model of an astronaut.">
  <button slot="hotspot-1" id="hotspot-1" data-tooltip="Hotspot 1" data-position="-1 1.3 1.3" data-normal="-0.73 0.05 0.69 style="background: #ff1b00; border: none; outline: none;" 
          onclick="showText('Побудована в XIII-XIV століттях, ймовірно, між 1340 і 1350 роками під час правління князя Любарта. В`їзна вежа стала основним входом до замку і відігравала важливу роль у обороні, забезпечуючи контроль над підходами до фортеці.')">
    <span style="display: none;">Hotspot 1</span>
    <div class="annotation">В`їзна вежа</div>
  </button>
<button slot="hotspot-2" id="hotspot-2" data-tooltip="Hotspot 2" data-position="0.9 1.4 -1" data-normal="-8 0.05 0.69 style="background: #ff1b00; border: none; outline: none;" 
          onclick="showText('Квадратна за планом та височіє над річкою Стир. Стирова вежа. Після того як її укріпив князь Свидригайло, вежа отримала ще одну назву – Свидригайлова.')">
    <span style="display: none;">Hotspot 2</span>
    <div class="annotation">Стирова вежа</div>
  </button>
<button slot="hotspot-3" id="hotspot-3" data-tooltip="Hotspot 3" data-position="-2 1.3 -1.5" data-normal="-0.73 0.05 0.69 style="background: #ff1b00; border: none; outline: none;" 
          onclick="showText('Владича вежа. Tака назва сформувалась тому, що за нею доглядав сам владика. Вежа не має оздоблення. З третього ярусу є виходи на бойові майданчики стін. Вежа вкрита шатровим дахом, над яким височіє на ніжці металева фігура «Кликун».')">
    <span style="display: none;">Hotspot 3</span>
    <div class="annotation">Владича вежа</div>
  </button>
<button slot="hotspot-4" id="hotspot-4" data-tooltip="Hotspot 4" data-position="-0.87 0.5 -0.12" data-normal="-0.73 0.05 0.69 style="background: #ff1b00; border: none; outline: none;" 
          onclick="showText('Унікальна споруда Луцького замку висотою приблизно 2 метри з дзвоном всередині.')">
    <span style="display: none;">Hotspot 3</span>
    <div class="annotation">Дзвіниця</div>
  </button>
<button slot="hotspot-5" id="hotspot-5" data-tooltip="Hotspot 5" data-position="0.4 0.8 0.80" data-normal="-0.73 0.05 0.69 style="background: #ff1b00; border: none; outline: none;" 
          onclick="showText('Будинок повітової канцелярії – адміністративна будівля, яка була розташована в межах замку і використовувалася для виконання офіційних функцій, ведення документації та управління справами Луцького повіту в середньовіччі.')">
    <span style="display: none;">Hotspot 5</span>
    <div class="annotation">Будинок повітової канцелярії</div>
  </button>
<button slot="hotspot-6" id="hotspot-6" data-tooltip="Hotspot 6" data-position="-1.6 1 -1.5" data-normal="-0.73 0.05 0.69 style="background: #ff1b00; border: none; outline: none;" 
          onclick="showText('Будинок повітової скарбниці – будівля, де зберігалися фінансові ресурси та державні кошти повіту. Це була важлива частина замкової адміністрації, яка забезпечувала фінансову стабільність і функціонування замку.')">
    <span style="display: none;">Hotspot 6</span>
    <div class="annotation">Будинок повітової скарбниці</div>
  </button>
<button slot="hotspot-7" id="hotspot-7" data-tooltip="Hotspot 7" data-position="-0.5 0.5 1.3" data-normal="-0.73 0.05 0.69 style="background: #ff1b00; border: none; outline: none;" 
          onclick="showText('Залишки княжого палацу – руїни палацу, що колись був резиденцією волинських князів.')">
    <span style="display: none;">Hotspot 7</span>
    <div class="annotation">Залишки княжого палацу</div>
  </button>
<button slot="hotspot-8" id="hotspot-8" data-tooltip="Hotspot 8" data-position="-0.5 0.5 -1.35" data-normal="-0.73 0.05 0.69 style="background: #ff1b00; border: none; outline: none;" 
          onclick="showText('Крипта- старовинна частина Луцького замку, у якій наразі проводяться активні археологічні дослідження.')">
    <span style="display: none;">Hotspot 8</span>
    <div class="annotation">Крипта</div>
  </button>
</model-viewer>
<div id="text-output">Натисніть на будь-яку точку, щоб дізнатися інформацію.</div>
<script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>
    <script>
    var map = new L.map('map', { zoomControl: false }).setView([50.75333333, 25.35277778], 12);;
    var customLayer1 = L.layerGroup().addTo(map);
     var circle = L.circle([50.7386, 25.3233], {
    color: 'red',
    fillColor: '#f03',
    fillOpacity: 0.5,
    radius: 125
}).addTo(customLayer1);

    var osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>'
    });
    osm.addTo(map);
    
    var customLayer = L.layerGroup().addTo(map);

    if(!navigator.geolocation) {
        alert("Ваш браузер не підтримує цю функцію!")
    } else {
        setInterval(() => {
            navigator.geolocation.getCurrentPosition(getPosition)
        }, 5000);
    }

    var marker, circle;

    function getPosition(position){
        // console.log(position)
        var lat = position.coords.latitude
        var long = position.coords.longitude
        var accuracy = position.coords.accuracy

        if(marker) {
            customLayer.clearLayers();
        }

        if(circle) {
            customLayer.clearLayers();
        }

        marker = L.marker([lat, long])
        circle = L.circle([lat, long], {radius: accuracy})

        var featureGroup = L.featureGroup([marker, circle]).addTo(customLayer)
 
    }
     

    window.onload = getLocation;
</script>
<script>
    const modelViewer = document.querySelector('#model');
    const textContainer = document.querySelector('#text-container');

    modelViewer.addEventListener('hotspot-click', (event) => {
        const hotspotName = event.detail.name;
        
        if (hotspotName === 'point1') {
            textContainer.textContent = 'Ви натиснули точку 1!';
        } else if (hotspotName === 'point2') {
            textContainer.textContent = 'Ви натиснули точку 2!';
        }
    });
</script>
<script>
    function showText(text) {
    const textOutput = document.getElementById('text-output');
    if (textOutput) {
        textOutput.innerText = text;
    } else {
        console.error("Element with id 'text-output' not found");
    }
}

</script>
<script src="https://interactivelutsk.github.io/interactivelutsk/assets/js/bar.js"></script>
</body>
</html>